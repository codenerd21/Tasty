{% extends 'main/base.html' %}
{% block content %}

<h1>Restaurant Detail</h1>

<div class="card">
	<div class="card-content">
		<span class="card-title">name: {{ restaurant.name }}</span>
		<span class="card-title">address: {{ restaurant.address }}</span>
		<span class="card-title">phone: {{ restaurant.phone }}</span>
		<span class="card-title">description: {{ restaurant.description }}</span>
		<span class="card-title">zip code: {{ restaurant.zipcode }}</span>
		<span class="card-title">owner: {{ restaurant.user.username }}</span>
		<div>
			<!-- google map -->
			<iframe width="300" height="225" frameborder="0" style="border:0" 
			src="{{map}}q={{restaurant.address}}" 
			allowfullscreen>
			</iframe>
		</div>
		{% if request.user == restaurant.user %}
		<button><a href="{% url 'restaurant_update' restaurant.id %}">Edit</a></button>
		{% endif %}
	</div>
</div>

<br>
<hr>

    <div class="card-content">
      <span class="card-title" style="display: inline-block"><h1>Menus</h1></span>
      {% if request.user == restaurant.user %}
      <button style="margin: 0px 10px"><a href="{% url 'menu_create' restaurant.id %}">Add A Menu</a></button>
      {% endif %}
    </div><br>
    
    {% for menu in restaurant.menu_set.all %}
    <a href="{% url 'menu_detail' menu.id %}">
      <div class="card" style="border: 4px solid black">
        <div class="card-content" style="background-color: gray">
          <img class="responsive-img card-panel" style="max-height: 450px; max-width: 450px;" src="{{menu.menu_photo}}"><br>
          <span class="dropdown" style="display: inline-block"> <h2 style="color: white">{{ menu.name }}</h2> </span><br>
          {% if request.user == restaurant.user %}
          <button><a href="{% url 'menu_update' menu.id %}" style="color: black">Edit Menu</a></button>
          <button><a href="{% url 'menu_delete' menu.id %}" style="color: black">Delete Menu</a></button>
          <button><a href="{% url 'delete_menu_photo' menu.id restaurant.id %}" style="color: black">Delete picture</a></button>      
          <div>
            <form action="{% url 'add_menu_photo' menu.id restaurant.id %}" enctype="multipart/form-data" method="POST" class="card-panel">
              {% csrf_token %}
              <input type="file" name="photo-file">
              <br><br>
              <input type="submit" class="btn" value="Upload Photo">
            </form>
        </div>     
          {% endif %}
              
            
  </div>
  </div>
</a>
{% endfor %}

{% endblock %}