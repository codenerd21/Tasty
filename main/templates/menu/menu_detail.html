{% extends 'main/base.html' %}
{% block content %}





<div>
  we also have these menus available:
  {% for menu in menus %}
    <a href="{% url 'menu_detail' menu.id %}">{{ menu.name }}</a>|
  {% endfor %}
</div>

<h1>{{ menu.name }}</h1>  


{% if request.user == restaurant.user %}
<h5><a href=" {% url 'category_create' menu.id %}">Add Category</a></h5>
{% endif %}

{% for category in menu.category_set.all %}
  
      <div class="card">
        <div class="card-content">
          <span class="card-title" style="display: inline-block"><h3>{{ category.name }}</h3></span>
          {% if request.user == restaurant.user %}
          <button><a href="{% url 'category_update' category.id menu.id %}">Edit Category</a></button>
          <button><a href="{% url 'category_delete' category.id menu.id %}">Delete Category</a></button>
          <button><a href="{% url 'food_create' category.id menu.id %}">Add Food</a></button>
          {% endif %}

{% for food in category.food_set.all %}
          <div class="card">
            <div class="card-content">
              <span class="card-title" style="display: inline-block"><h3>food name: {{ food.name }}</h3></span>
              <span class="card-title" style="display: inline-block"><h3>food price: {{ food.price }}</h3></span>
              <span class="card-title" style="display: inline-block"><h3>food description: {{ food.description }}</h3></span>
    <img class="responsive-img card-panel" src="{{food.food_photo}}">
              {% if request.user == restaurant.user %}
              <button><a href="{% url 'food_update' food.id menu.id %}">Edit Food</a></button>              
              <button><a href="{% url 'food_delete' food.id menu.id %}">Delete Food</a></button>    
              <div>
                  <form action="{% url 'add_food_photo' food.id menu.id %}" enctype="multipart/form-data" method="POST" class="card-panel">
                    {% csrf_token %}
                    <input type="file" name="photo-file">
                    <br><br>
                    <input type="submit" class="btn" value="Upload Photo">
                  </form>
              </div>    
              <button><a href="{% url 'delete_food_photo' food.id menu.id %}">Delete picture</a></button>      
              {% endif %}
        </div>
      </div>
{% endfor %}


    </div>
  </div>
{% endfor %}
{% for photo in food.photo_set.all %}
  <img class="responsive-img card-panel" src="{{photo.url}}">
{% empty %}
  <div class="card-panel teal-text center-align">No Photos Uploaded</div>
{% endfor %}
{% endblock %}